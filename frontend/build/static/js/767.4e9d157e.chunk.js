"use strict";(self.webpackChunkecommerce=self.webpackChunkecommerce||[]).push([[767],{1767:(e,t,s)=>{s.r(t),s.d(t,{default:()=>c});var a=s(5043),l=s(3003),r=s(3494),o=s(826),n=s(3216),i=s(579);const c=()=>{var e,t,s;const c=(0,l.wA)(),{id:d}=(0,n.g)(),{lessons:x}=(0,l.d4)((e=>e.Lessons)),{progress:u}=(0,l.d4)((e=>e.Progress||{progress:[]})),[h,m]=(0,a.useState)(null),[p,g]=(0,a.useState)(0),[v,f]=(0,a.useState)(0),[b,j]=(0,a.useState)(""),[y,w]=(0,a.useState)(!1),[N,C]=(0,a.useState)(!1),[k,z]=(0,a.useState)(!1),[S,T]=(0,a.useState)(0),[A,M]=(0,a.useState)(0),[E,R]=(0,a.useState)(!1),_=(0,a.useRef)(null),[L,P]=(0,a.useState)(!1),[B,$]=(0,a.useState)("#2563eb"),[H,D]=(0,a.useState)(3);(0,a.useEffect)((()=>{c((0,r.Ks)())}),[c]),(0,a.useEffect)((()=>{const e=x.find((e=>e.course===parseInt(d)));e&&m(e)}),[x,d]);const I=null===h||void 0===h||null===(e=h.exercises)||void 0===e?void 0:e[p],V=()=>{if(!I||!b.trim())return;T((e=>e+1));const e=b.trim()===I.correct_answer;z(e),C(!0),e?(M((e=>e+1)),f((e=>e+h.xp_value)),setTimeout((()=>{C(!1),j(""),g((e=>e+1))}),2e3)):setTimeout((()=>{C(!1)}),2e3)},X=null!==h&&void 0!==h&&null!==(t=h.exercises)&&void 0!==t&&t.length?Math.round(p/h.exercises.length*100):0;(0,a.useEffect)((()=>{if(h&&p>=h.exercises.length&&!y){const e=(new Date).toISOString(),t=S>0?A/S:0;c((0,o.A)(h.id,{completed:!0,earned_xp:v,accuracy:t,retries:S,timestamp:e})),w(!0)}}),[h,p,v,S,A,y,c]);const J=e=>{const t=_.current,s=t.getBoundingClientRect(),a=t.width/s.width,l=t.height/s.height;return e.touches?{x:(e.touches[0].clientX-s.left)*a,y:(e.touches[0].clientY-s.top)*l}:{x:(e.clientX-s.left)*a,y:(e.clientY-s.top)*l}},G=e=>{e.preventDefault(),P(!0);const t=J(e),s=_.current.getContext("2d");s.beginPath(),s.moveTo(t.x,t.y)},K=e=>{if(e.preventDefault(),!L)return;const t=J(e),s=_.current.getContext("2d");s.lineTo(t.x,t.y),s.strokeStyle=B,s.lineWidth=H,s.lineCap="round",s.lineJoin="round",s.stroke()},W=e=>{e.preventDefault(),P(!1)},U=()=>(0,i.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:(0,i.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),Y=()=>(0,i.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),q=()=>(0,i.jsx)("svg",{className:"w-16 h-16",fill:"currentColor",viewBox:"0 0 20 20",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),F=()=>(0,i.jsx)("svg",{className:"w-16 h-16",fill:"currentColor",viewBox:"0 0 20 20",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),O=()=>(0,i.jsx)("svg",{className:"w-16 h-16",fill:"currentColor",viewBox:"0 0 20 20",children:(0,i.jsx)("path",{d:"M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM4 8a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H6a2 2 0 01-2-2V8z"})}),Q=()=>(0,i.jsxs)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:[(0,i.jsx)("path",{d:"M3 3h18a1 1 0 011 1v12a1 1 0 01-1 1H3a1 1 0 01-1-1V4a1 1 0 011-1zm1 2v10h16V5H4zm2 2h12v2H6V7zm0 3h8v2H6v-2z"}),(0,i.jsx)("path",{d:"M12 19l-2-2h4l-2 2z"})]});return h?(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-400 via-purple-500 to-pink-500 relative overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute top-10 left-10 w-20 h-20 bg-yellow-300 rounded-full opacity-70 animate-bounce"}),(0,i.jsx)("div",{className:"absolute top-32 right-16 w-12 h-12 bg-pink-300 rounded-full opacity-60 animate-pulse"}),(0,i.jsx)("div",{className:"absolute bottom-20 left-20 w-8 h-8 bg-green-300 rounded-full opacity-80 animate-bounce delay-300"}),(0,i.jsx)("div",{className:"absolute bottom-40 right-32 w-16 h-16 bg-orange-300 rounded-full opacity-50 animate-pulse delay-700"}),(0,i.jsxs)("div",{className:"container mx-auto px-4 py-8 relative z-10",children:[(0,i.jsxs)("div",{className:"text-center mb-8",children:[(0,i.jsx)("h1",{className:"text-4xl font-bold text-white mb-2 drop-shadow-lg",children:h.title}),(0,i.jsxs)("div",{className:"flex items-center justify-center space-x-6",children:[(0,i.jsxs)("div",{className:"flex items-center bg-yellow-400 rounded-full px-4 py-2 shadow-lg",children:[(0,i.jsx)(U,{}),(0,i.jsxs)("span",{className:"ml-2 font-bold text-yellow-900",children:[v," XP"]})]}),(0,i.jsxs)("div",{className:"flex items-center bg-red-400 rounded-full px-4 py-2 shadow-lg",children:[(0,i.jsx)(Y,{}),(0,i.jsx)("span",{className:"ml-2 font-bold text-red-900",children:"3"})]})]})]}),(0,i.jsxs)("div",{className:"max-w-md mx-auto mb-8",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,i.jsx)("span",{className:"text-white font-medium",children:"Progreso"}),(0,i.jsxs)("span",{className:"text-white font-bold",children:[p,"/",(null===(s=h.exercises)||void 0===s?void 0:s.length)||0]})]}),(0,i.jsx)("div",{className:"w-full bg-white bg-opacity-30 rounded-full h-4 overflow-hidden",children:(0,i.jsx)("div",{className:"bg-gradient-to-r from-green-400 to-green-600 h-4 rounded-full transition-all duration-500 ease-out relative",style:{width:`${X}%`},children:(0,i.jsx)("div",{className:"absolute inset-0 bg-white bg-opacity-20 animate-pulse"})})})]}),(0,i.jsx)("div",{className:"max-w-2xl mx-auto",children:I?(0,i.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl overflow-hidden transform hover:scale-105 transition-transform duration-300",children:[(0,i.jsx)("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 p-6 text-white",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm opacity-90 mb-2",children:h.instruction}),(0,i.jsx)("h2",{className:"text-2xl font-bold",children:I.question_text})]}),(0,i.jsxs)("button",{onClick:()=>R(!0),className:"bg-white bg-opacity-20 hover:bg-opacity-30 p-3 rounded-2xl transition-all duration-200 flex items-center space-x-2",title:"Abrir pizarra para calcular",children:[(0,i.jsx)(Q,{}),(0,i.jsx)("span",{className:"hidden md:inline text-sm font-medium",children:"Pizarra"})]})]})}),(0,i.jsx)("div",{className:"p-8",children:"input"===I.answer_type?(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsx)("div",{className:"relative",children:(0,i.jsx)("input",{type:"text",value:b,onChange:e=>j(e.target.value),className:"w-full text-2xl text-center py-4 px-6 border-4 border-purple-200 rounded-2xl focus:border-purple-500 focus:outline-none transition-colors duration-300",placeholder:"Escribe tu respuesta...",onKeyPress:e=>"Enter"===e.key&&V()})}),(0,i.jsx)("button",{onClick:V,disabled:!b.trim(),className:"w-full bg-gradient-to-r from-green-400 to-green-600 hover:from-green-500 hover:to-green-700 disabled:from-gray-300 disabled:to-gray-400 text-white font-bold py-4 px-8 rounded-2xl text-xl transform hover:scale-105 active:scale-95 transition-all duration-200 shadow-lg disabled:cursor-not-allowed",children:"\xa1Enviar Respuesta!"})]}):"multiple_choice"===I.answer_type&&I.options?(0,i.jsx)("div",{className:"grid gap-4",children:I.options.map(((e,t)=>(0,i.jsx)("button",{onClick:()=>(e=>{T((e=>e+1));const t=e===I.correct_answer;z(t),C(!0),t?(M((e=>e+1)),f((e=>e+h.xp_value)),setTimeout((()=>{C(!1),g((e=>e+1))}),2e3)):setTimeout((()=>{C(!1)}),2e3)})(e),className:"bg-gradient-to-r from-blue-100 to-purple-100 hover:from-blue-200 hover:to-purple-200 border-2 border-blue-200 hover:border-purple-300 text-xl font-semibold py-4 px-6 rounded-2xl transform hover:scale-105 active:scale-95 transition-all duration-200 text-gray-700",children:e},t)))}):(0,i.jsx)("div",{className:"text-center py-8",children:(0,i.jsx)("p",{className:"text-gray-500 text-lg",children:"Tipo de pregunta no soportado"})})})]}):(0,i.jsx)("div",{className:"text-center",children:(0,i.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-12 transform hover:scale-105 transition-transform duration-300",children:[(0,i.jsx)("div",{className:"text-yellow-500 mb-6",children:(0,i.jsx)(O,{})}),(0,i.jsx)("h2",{className:"text-4xl font-bold text-gray-800 mb-4",children:"\xa1Felicitaciones!"}),(0,i.jsx)("p",{className:"text-xl text-gray-600 mb-6",children:"Has completado toda la lecci\xf3n"}),(0,i.jsx)("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white rounded-2xl p-6 inline-block",children:(0,i.jsxs)("p",{className:"text-2xl font-bold",children:["Ganaste ",v," puntos XP"]})})]})})})]}),E&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-4xl w-full max-h-screen overflow-auto",children:[(0,i.jsx)("div",{className:"bg-gradient-to-r from-green-400 to-blue-500 p-4 text-white rounded-t-3xl",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("h3",{className:"text-2xl font-bold",children:"\ud83c\udfa8 Pizarra Digital"}),(0,i.jsx)("button",{onClick:()=>R(!1),className:"bg-white bg-opacity-20 hover:bg-opacity-30 p-2 rounded-full",children:(0,i.jsx)(F,{})})]})}),(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4 flex-wrap gap-4",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsx)("span",{className:"font-medium text-gray-700",children:"Colores:"}),(0,i.jsx)("div",{className:"flex space-x-2",children:["#2563eb","#dc2626","#16a34a","#ca8a04","#9333ea","#c2410c"].map((e=>(0,i.jsx)("button",{onClick:()=>$(e),className:`w-8 h-8 rounded-full border-4 ${B===e?"border-gray-800":"border-gray-300"} transition-all duration-200`,style:{backgroundColor:e}},e)))})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsx)("span",{className:"font-medium text-gray-700",children:"Grosor:"}),(0,i.jsx)("div",{className:"flex space-x-2",children:[2,4,6,8].map((e=>(0,i.jsx)("button",{onClick:()=>D(e),className:`w-8 h-8 rounded-full ${H===e?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"} flex items-center justify-center font-bold text-sm transition-all duration-200`,children:e},e)))})]}),(0,i.jsx)("button",{onClick:()=>{const e=_.current;e.getContext("2d").clearRect(0,0,e.width,e.height)},className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-xl font-medium transition-colors duration-200",children:"\ud83d\uddd1\ufe0f Borrar Todo"})]}),(0,i.jsx)("div",{className:"border-4 border-gray-300 rounded-2xl overflow-hidden bg-white",children:(0,i.jsx)("canvas",{ref:_,width:800,height:500,className:"w-full touch-none cursor-crosshair",onMouseDown:G,onMouseMove:K,onMouseUp:W,onMouseLeave:W,onTouchStart:G,onTouchMove:K,onTouchEnd:W})}),(0,i.jsx)("p",{className:"text-center text-gray-500 mt-4 text-sm",children:"\ud83d\udca1 Usa esta pizarra para hacer tus c\xe1lculos y razonamientos matem\xe1ticos"})]})]})}),N&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-3xl p-12 text-center transform animate-bounce shadow-2xl "+(k?"border-8 border-green-400":"border-8 border-red-400"),children:[(0,i.jsx)("div",{className:(k?"text-green-500":"text-red-500")+" mb-4",children:k?(0,i.jsx)(q,{}):(0,i.jsx)(F,{})}),(0,i.jsx)("h3",{className:"text-3xl font-bold mb-4 "+(k?"text-green-600":"text-red-600"),children:k?"\xa1Excelente!":"\xa1Int\xe9ntalo de nuevo!"}),k&&(null===I||void 0===I?void 0:I.feedback)&&(0,i.jsx)("p",{className:"text-gray-600 text-lg",children:I.feedback}),k&&(0,i.jsxs)("div",{className:"flex items-center justify-center mt-4 text-yellow-600",children:[(0,i.jsx)(U,{}),(0,i.jsxs)("span",{className:"ml-2 font-bold text-xl",children:["+",h.xp_value," XP"]})]})]})})]}):(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-400 via-pink-400 to-orange-400 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"bg-white rounded-3xl p-8 shadow-2xl",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-purple-500 mx-auto"}),(0,i.jsx)("p",{className:"text-center mt-4 text-gray-600 font-medium",children:"Cargando tu aventura matem\xe1tica..."})]})})}},3115:(e,t,s)=>{s.d(t,{n:()=>l});var a=s(4308);const l=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return l=>{l({type:a._R,payload:{msg:e,alertType:t}}),setTimeout((()=>l({type:a.sN})),s)}}},3494:(e,t,s)=>{s.d(t,{Ks:()=>n});var a=s(6213),l=s(4308),r=s(3115);const o="http://localhost:8000/api/lessons/",n=()=>async e=>{try{const t=await a.A.get(o);e({type:l.rJ,payload:t.data.results})}catch(t){e({type:l.sy}),e((0,r.n)("Error cargando lecciones","red"))}}},826:(e,t,s)=>{s.d(t,{A:()=>i,y:()=>n});var a=s(6213),l=s(4308),r=s(3115);const o="http://localhost:8000/api/progress/",n=()=>async e=>{const t={headers:{Authorization:`JWT ${localStorage.getItem("access")}`}};try{const s=await a.A.get(o,t);e({type:l.RN,payload:s.data})}catch(s){e({type:l.oB}),e((0,r.n)("Error al cargar progreso","red"))}},i=(e,t)=>async(s,n)=>{var i;const c={headers:{Authorization:`JWT ${localStorage.getItem("access")}`,"Content-Type":"application/json"}},d=null===(i=n().Progress)||void 0===i?void 0:i.progress;let x=(Array.isArray(d)?d:(null===d||void 0===d?void 0:d.results)||[]).find((t=>t.lesson===e));try{if(!x){const t=await a.A.get(`${o}`,c);x=(Array.isArray(t.data)?t.data:[]).find((t=>t.lesson===e))}if(x){const e=await a.A.put(`${o}${x.id}/`,t,c);s({type:l.Ee,payload:e.data})}else{const r=await a.A.post(o,{lesson:e,...t},c);s({type:l.Ee,payload:r.data})}}catch(u){s({type:l.bG}),s((0,r.n)("Error al guardar progreso","red"))}}}}]);
//# sourceMappingURL=767.4e9d157e.chunk.js.map